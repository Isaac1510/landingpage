"use strict";!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.logo=o():e.logo=o()}(self,(()=>(self.webpackChunk=self.webpackChunk||[]).push([[662],{2952:(e,o,t)=>{t.r(o),t.d(o,{default:()=>d}),t(5647);var r=t(7451),s=t(2492),c=t(7664),a=t(4223),i=t(6801),n=t(7739),l=t(1212),u=t(2274);t(6045),new class{constructor(){s.A.ready((()=>{this.processCopyToAccount()}))}processCopyToAccount(){let e=!1;(0,s.A)(".js-copy-to-account").each((o=>{const t=(0,s.A)(o);t.on("keydown",(async o=>{if(13===o.keyCode&&!e){e=!0;try{await(0,a.A)(`${r.Km.DOMAIN}/api/logo/copy-to-account/${t.data("id")}/${t.value()}`,{error:"something went wrong",success:"succesfully copied to account",useServerError:!0})}catch(e){l.A.captureError(e)}e=!1}}))}))}},new class{constructor(){s.A.ready((()=>{this.processCopyFromLogo()}))}processCopyFromLogo(){let e=!1;(0,s.A)(".js-copy-from-logo").each((o=>{const t=(0,s.A)(o);t.on("keydown",(async o=>{if(13===o.keyCode&&!e){e=!0;try{await(0,a.A)(`${r.Km.DOMAIN}/api/logo/copy-from-logo/${t.data("id")}/${t.value()}`,{error:"something went wrong",success:"succesfully copied from logo",useServerError:!0})}catch(e){l.A.captureError(e)}e=!1}}))}))}};const d=new class{constructor(){var e,o,t;e=this,t=!1,(o=function(e){var o=function(e){if("object"!=typeof e||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var t=o.call(e,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof o?o:o+""}(o="hasTrackedPurchase"))in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,s.A.ready((()=>{this.logoID=(0,s.A)(".js-logo__actions").data("logo-id");const e=window.mybrandnewlogo.logo,o=u.A.$modal;e.purchaseIntent&&(o.length?o.hasEvent("open")&&o.trigger("open"):l.A.captureError("no modal to open")),this.processDelete(),this.processDuplicate(),this.checkPackage(),this.processFreeDownload()}))}processFreeDownload(){(0,s.A)(".js-free-download").on("click",(async()=>{await(0,a.A)(`${r.Km.DOMAIN}/api/payment/free-download`,{logoID:this.logoID},{error:!0,useServerError:!0,isInBody:!0})||l.A.captureError("no result")}))}async checkPackage(){const e=(0,s.A)(".js-logo__action-download"),o=(0,s.A)(".js-image-download");if(e.length&&!e.hasClass("active"))try{const t=await(0,a.A)(`${r.Km.DOMAIN}/api/logo/check-package/${this.logoID}`);if(t.success){const r=/failed/i.test(t.status),a=/canceled/i.test(t.status);if(r||a)(0,s.A)(".js-logo__loading-text").text(t.message),window.location=window.location.href.split("?")[0];else{e.toggleClass("active",t.isComplete),o.toggleClass("active",t.isComplete);const r=t.purchaseInfo;r&&!this.hasTrackedPurchase&&(0!==r.total&&c.A.trackPurchase(r),this.hasTrackedPurchase=!0),t.isComplete||(await i.A.delay(5),this.checkPackage())}}else l.A.captureError(t.errror)}catch(e){l.A.captureError("error checking package",{message:e})}else c.A.trackProductDetailView({id:this.logoID,name:"logo single"})}processDelete(){const e=(0,s.A)(".js-modal-delete");e.find(".js-submit").on("click",(()=>{n.A.setInactive(e),Promise.all([n.A.waitMinimum(),(0,a.A)(`${r.Km.DOMAIN}/api/logo/delete/${this.logoID}`,null,{error:"something went wrong",isInBody:!0}).then((o=>{n.A.processResult({result:o,$modal:e})})).catch((o=>{l.A.captureError(o,{showReportDialog:!0}),n.A.setActive(e),e.trigger("close")}))])}))}processDuplicate(){const e=(0,s.A)(".js-modal-duplicate");e.find(".js-submit").on("click",(()=>{n.A.setInactive(e),Promise.all([n.A.waitMinimum(),(0,a.A)(`${r.Km.DOMAIN}/api/logo/duplicate/${this.logoID}`,null,{error:"something went wrong",isInBody:!0}).then((o=>{n.A.processResult({result:o,$modal:e})})).catch((o=>{l.A.captureError(o,{showReportDialog:!0}),n.A.setActive(e),e.trigger("close")}))])}))}}},6045:(e,o,t)=>{var r=t(2492),s=t(4223),c=t(1212),a=t(7451);new class{constructor(){r.A.ready((()=>{this.processChangeKeywords()}))}processChangeKeywords(){let e=!1;(0,r.A)(".js-change-keywords").each((o=>{const t=(0,r.A)(o);t.on("keydown",(async o=>{if(13===o.keyCode&&!e){e=!0;try{await(0,s.A)(`${a.Km.DOMAIN}/api/logo/set-keywords/${t.data("id")}`,{keywords:t.value()},{error:"something went wrong",success:"succesfully changed keywords",useServerError:!0})}catch(e){c.A.captureError(e)}e=!1}}))}))}}}},e=>{var o=o=>e(e.s=o);return e.O(0,[336,526,274],(()=>(o(7065),o(2952)))),e.O()}])));